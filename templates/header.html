<div class="navbar navbar-inverse navbar-fixed-top">
    <div class="navbar-header">
        <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
        </button>
        <a class="navbar-brand" href="{{ SITEURL }}">
            <i class="icon-home"></i> {{ SITENAME }}
        </a>
    </div>
	<nav class="collapse navbar-collapse bs-navbar-collapse" role="navigation">
		<ul class="nav navbar-nav">
		{% if NIUX2_HEADER_SECTIONS %}
		{% for section in NIUX2_HEADER_SECTIONS %}
			<li><a href="{{ section[2] }}" title="{{ section[1] }}">
			    <i class="{{ section[3] }}"></i> {{ section[0] }}</a>
			</li>
		{% endfor %}
		{% else %}
		<li><a href="{{ SITEURL }}/{{ ARCHIVE_SAVE_AS | default('archives.html') }}">
                <i class="icon-archive"></i> 存档</a>
		</li>
		<li><a href="{{ SITEURL }}/{{ TAGS_SAVE_AS | default('tags.html') }}">
                <i class="icon-tag"></i> 标签</a>
		</li>
		{% endif %}
		<!-- category dropdown list -->
		<li class="dropdown">
           <a href="#" class="dropdown-toggle" data-toggle="dropdown">
                <i class="icon-folder-open"></i>分类<b class="caret"></b>
           </a>
           <ul class="dropdown-menu">
               {% for cat, article_list in categories %}
               <li><a href="{{ SITEURL }}/{{ cat.url }}">
                   {% if NIUX2_CATEGORY_MAP and NIUX2_CATEGORY_MAP[cat] %}
                      <i class="{{ NIUX2_CATEGORY_MAP[cat][1] }}"></i>
	                  {{ NIUX2_CATEGORY_MAP[cat][0] }}
	               {% else %}
	               <i class="icon-folder-close"></i>
	               {{ cat }}
	               {% endif %}
                      ({{ article_list | count }})</a></li>
               {% endfor %}
           </ul>
        </li>
        <!--  self defined dropdown list -->
		{% if NIUX2_HEADER_DROPDOWN_SECTIONS %}
		{% for dpsection, dplinks in NIUX2_HEADER_DROPDOWN_SECTIONS.items() %}
		<li class="dropdown">
		   <a href="#" class="dropdown-toggle" data-toggle="dropdown">
		       <i class="{{ dpsection[1] }}"></i> {{ dpsection[0] }}<b class="caret"></b>
		   </a>
		   <ul class="dropdown-menu">
		   {% for link in dplinks %}
		       <li><a href="{{ link[2] }}" title="{{ link[1] }}">
                 <i class="{{ link[3] }}"></i>
                 {{ link[0] }}</a>
		       </li>
		   {% endfor %}
		   </ul>
		</li>
		{% endfor %}
        {% endif %}
		<!--  table of contents of page or article -->
		{% if page or article %}
           {% if page and page.html_doc %}
           <li class="dropdown dropdown-toc">
               <a href="#" class="dropdown-toggle" data-toggle="dropdown">
               <i class="icon-list-ul"></i>
                   {{ NIUX2_HEADER_TOC_NAME | default("TOC") }}<b class="caret"></b>
               </a>
               {{ page.html_h1 }}
           {% elif article and article.html_toc %}
           <li class="dropdown dropdown-toc">
               <a href="#" class="dropdown-toggle" data-toggle="dropdown">
                   <i class="icon-list-ul"></i>
                   {{ NIUX2_HEADER_TOC_NAME | default("TOC") }}<b class="caret"></b>
               </a>
               {{ article.html_h1 }}
           {% endif %}
        </li>
        {% endif %}
		<!-- google custom search -->
		{% if NIUX2_GOOGLE_CSE_ID %}
			<div class="navbar-form navbar-right">
            	<script>
				  (function() {
				    var cx = '{{ NIUX2_GOOGLE_CSE_ID }}';
				    var gcse = document.createElement('script');
				    gcse.type = 'text/javascript';
				    gcse.async = true;
				    gcse.src = (document.location.protocol == 'https:' ? 'https:' : 'http:') +
				        '//www.google.com/cse/cse.js?cx=' + cx;
				    var s = document.getElementsByTagName('script')[0];
				    s.parentNode.insertBefore(gcse, s);
				  })();
				</script>
				<gcse:searchbox-only></gcse:searchbox-only>
          </div>
		{% endif %}
		</ul>
	</nav>
</div>
